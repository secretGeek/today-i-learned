<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8' name='viewport' content='width=device-width, initial-scale=1.0'>
<title>{{title}}</title>
<script type="text/javascript" src="/today-i-learned/script.js" defer></script>
</head>
<body>
<link rel="stylesheet" type="text/css" href="/today-i-learned/style.css">
<header>
<div class='nav'><a href='/today-i-learned'>Today I Learned</a>


<form action="https://www.google.com/search" method="get" class='search'>
    <input type="hidden" value="til.secretgeek.net" name="as_sitesearch">
    <input type="text" maxlength="255" size="25" name="q" class="search-text" placeholder="Search..."><input type="submit" value="ðŸ”Ž" class="search-button" name="btnG" title="Search">
</form>
</div>
</header>
<div id='breadcrumb' class='breadcrumb'>*</div>
<article>
<h1 id="uncomplicated-firewall.how-do-we-set-that-up">Uncomplicated Firewall... how do we set that up?</h1>
<p>Just before (or immediately after) you've got nginx installed, it's time to think about getting a firewall in place.</p>
<p>ufw (Ucomplicated FireWall) is just the ticket.</p>
<p>Enable ufw, and allow 80, for inbound http requests, and 22 for SSH, as follows:</p>
<pre><code>sudo ufw enable;sudo ufw allow 22/tcp;sudo ufw allow 80/tcp
</code></pre>
<p>To check if <code>ufw</code> is set up as expected...</p>
<pre><code>$ sudo ufw status
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere
80/tcp                     ALLOW       Anywhere
22/tcp (v6)                ALLOW       Anywhere (v6)
80/tcp (v6)                ALLOW       Anywhere (v6)
</code></pre>
<p>And for extra info you can try:</p>
<pre><code>$ sudo ufw status verbose
Status: active
Logging: on (low)
Default: deny (incoming), allow (outgoing), disabled (routed)
New profiles: skip

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW IN    Anywhere
80/tcp                     ALLOW IN    Anywhere
22/tcp (v6)                ALLOW IN    Anywhere (v6)
80/tcp (v6)                ALLOW IN    Anywhere (v6)
</code></pre>
<p>And to see which apps are registered with ufw...</p>
<pre><code>$ sudo ufw app list
Available applications:
  Nginx Full
  Nginx HTTP
  Nginx HTTPS
  OpenSSH
</code></pre>
<p>Considerations for later...</p>
<blockquote>
<p>HTTPS connections can be allowed with this command:</p>
<pre><code>sudo ufw allow https
</code></pre>
<p>If you'd rather use the port number, 443, use this command:</p>
<p>sudo ufw allow 443</p>
</blockquote>
<p>Simpler one is:</p>
<pre><code>sudo ufw allow 'Nginx HTTP'
</code></pre>
<p>Or, for http and https:</p>
<pre><code>sudo ufw allow 'Nginx Full'
</code></pre>
<p>You can remove those you've already allowed with, for example:</p>
<pre><code>sudo ufw delete allow 80/tcp
</code></pre>
<footer>because that's superceded by 'Nginx HTTP' profile</footer>
<pre><code>sudo ufw delete allow 'Nginx HTTP'
</code></pre>
<footer>because that's superceded by 'Nginx Full' (which allow both http and https)</footer>
<p>Might also want to allow 'OpenSSH' something like sudo ufw allow 'OpenSSH' but i'm not sure so I'd stick with</p>
<pre><code>sudo ufw allow 22/tcp
</code></pre>
<p>For now.</p>
<p>Although, checking what application lists are avaible with:</p>
<pre><code>sudo ufw app list
</code></pre>
<p>I see:</p>
<p>Nginx Full
Nginx HTTP
Nginx HTTPS
OpenSSH</p>
<p>So I expect if i do <code>sudo ufw allow 'OpenSSH'</code> then i would be able to delete 22/tcp and still use ssh.</p>
<h2 id="source">Source</h2>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-14-04">https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-14-04</a></li>
</ul>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="nginx.html">nginx</a></li>
</ul>

</article>
</body>
</html>