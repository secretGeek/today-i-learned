<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8' name='viewport' content='width=device-width, initial-scale=1.0'>
<title>rebuild . Today I Learned (secretGeek)</title>
<script type="text/javascript" src="/highlight.pack.js" defer></script>
<script type="text/javascript" src="/script.js" defer></script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’¡</text></svg>">
</head>
<body>
<link rel="stylesheet" type="text/css" href="/highlight.min.css">
<link rel="stylesheet" type="text/css" href="/dracula.css">
<link rel="stylesheet" type="text/css" href="/style.css">
<header>
<div class='nav'><a href='/'>ðŸ’¡ Today I Learned</a>
<form action="https://www.google.com/search" method="get" class='search'>
<input type="hidden" value="til.secretgeek.net" name="as_sitesearch">
<input type="submit" value="ðŸ”Ž" class="search-button" name="btnG" title="Search" style="float:right">
<input type="text" maxlength="255" size="20" name="q" class="search-text" placeholder="Search..." style="float:right">
</form>
</div>
</header>
<div id='breadcrumb' class='breadcrumb'>*</div>
<article>
<h2 id="npm-cant-find-local-packages">NPM can't find local packages</h2>
<p>Ever had a situation where npm can't run local packages?</p>
<p>For example <code>npm run tests</code> is failing because the first thing it does it <code>jest</code> and node can't find <code>jest</code>?</p>
<p>It could be that you haven't installed the packages, if so, used <code>npm install</code> to do that... but I think you know about <code>npm install</code> and it's probably <em>not</em> that.</p>
<p>What I found recently was that the folder <code>node_modules/.bin</code> was pretty much empty. What it <em>should</em> have had was a whole lot of files, three files for each command that can be run, e.g.</p>
<pre><code>webpack
webpack.cmd
webpack.ps1
</code></pre>
<p>...and in a typical <code>node_modules/.bin</code> folder for a &quot;real&quot; project, there might be 160 files (for example). But in my project, it had only 3 such files...</p>
<p>How did this happen?</p>
<p>I'm not sure, but I suspect it was because I was urged to run a command &quot;&amp; npm rebuild node-sass&quot;</p>
<p>Generally if <code>node_modules</code> isn't behaving I run <code>npm i</code> (full name, &quot;npm install&quot;) and get things back in shape. In this case, it wasn't enough.</p>
<p>A good next step would be: delete the package-lock file, and then run <code>npm i</code> -- i didn't do this, but suspect it would've helped. (I skipped this step, today)</p>
<p>The <em>next</em> fall back is: delete the entire <code>node_modules</code> folder, and then run <code>npm i</code> -- this was enough to help me in this case.</p>

</article>
<footer><hr /><small><a href='http://secretgeek.net'>secretgeek.net</a> | <a href='https://nimbletext.com'>nimbletext</a> | <a href='http://timesnapper.com'>TimeSnapper</a></small><br /><br /></footer>
</body>
</html>