<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8' name='viewport' content='width=device-width, initial-scale=1.0'>
<title>find todos . Today I Learned (secretGeek)</title>
<script type="text/javascript" src="/highlight.min.js" defer></script>
<script type="text/javascript" src="/script.js" defer></script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’¡</text></svg>">
</head>
<body>
<link rel="stylesheet" type="text/css" href="/highlight.min.css">
<link rel="stylesheet" type="text/css" href="/dracula.css">
<link rel="stylesheet" type="text/css" href="/style.css">
<header>
<div class='nav'><a href='/'>ðŸ’¡ Today I Learned</a>
<form action="https://www.google.com/search" method="get" class='search'>
<input type="hidden" value="til.secretgeek.net" name="as_sitesearch">
<input type="submit" value="ðŸ”Ž" class="search-button" name="btnG" title="Search" style="float:right">
<input type="text" maxlength="255" size="20" name="q" class="search-text" placeholder="Search..." style="float:right">
</form>
</div>
</header>
<div id='breadcrumb' class='breadcrumb'>*</div>
<article>
<h1 id="find-all-the-todos-in-a-file-or-folder">Find all the TODO's in a file or folder</h1>
<pre><code>function todo()
{
	# recursively search for TODO followed by colon, or [ ] with an underscore in between.
	findtext (&quot;TODO&quot; + &quot;:|\[_\]&quot;)
}
</code></pre>
<p>...which relies on my ever-evolving sense of 'findtext'</p>
<p>Currently something like.... (this is dynamically loaded from util)</p>
<pre><code>[string[]] $fileTypes = &quot;*.md&quot;,&quot;*.fmw&quot;,&quot;*.txt&quot;,&quot;*.cs&quot;,&quot;*.cshtml&quot;,&quot;*.css&quot;,&quot;*.ps1&quot;,&quot;*.js&quot;,&quot;*.bat&quot;,&quot;*.vbs&quot;,&quot;*.vb&quot;,&quot;*.xml&quot;,&quot;*.config&quot;,&quot;*.htm&quot;,&quot;*.html&quot;,&quot;*.pre&quot;,&quot;*.ini&quot;,&quot;*.sql&quot;,&quot;*.linq&quot;,&quot;*.json&quot;,&quot;*.spark&quot;,&quot;*.ts&quot;,&quot;*.psm1&quot;,&quot;*.psd1&quot;,&quot;*.aspx&quot;,&quot;*.ascx&quot;,&quot;*.asp&quot;,&quot;*.asmx&quot;,&quot;*.pubxml&quot;,&quot;*.dgml&quot;,&quot;*.sln&quot;,&quot;*.*proj&quot;,&quot;*.spark&quot;,&quot;*.rdl&quot;,&quot;*.py&quot;,&quot;*.log&quot;,&quot;*.las&quot;,&quot;*.ascx&quot;, &quot;*.inc&quot;, &quot;*.xaml&quot;,&quot;*.sh&quot;,&quot;*.csv&quot;,&quot;*.tsv&quot;,&quot;*.php&quot;,&quot;*.ok&quot;

#Consider: asa asax ascx ashx asmx asp aspq aspx cfg cfm class config cs cshtm cshtml css csv dbml htaccess htm html ini inc install js log master module mxml php phps pl py readme restext resx script settings sitemap skin sql svc text txt vb vbhtm vbhtml vbs xaml xml xoml xsd xsl xslt
#function findtext_norecurse($pattern)
#function findtext_raw($pattern)
#function findtext_raw_type($pattern, $recursive)
#function findtext_raw_casesensitive($pattern)
#function findtext_type($types, $pattern, $recursive){

## Commands:
## findtext $pattern   &lt;-- search all text type files for a particular regex
###                       if it's not valid as a regex we'll treat it as a literal string.
## findtext_raw $pattern   &lt;-- search all text type files for a literal string.
## findtext_type $types $pattern $recurse   &lt;-- e.g. findtext
## findtext_raw $pattern   &lt;-- search all text type files for a literal string.
## findtext_raw_type $pattern   &lt;-- search all text type files for a literal string.
## pre_help          &lt;-- help on pre
## pre_help_detailed &lt;-- verbose help on pre, with details about codeblocks.


function findtext($pattern, $recursive)
{
    if ($null -eq $pattern) {
        write-host &quot;Please provide a pattern you wish to find. (all text files will be searched)&quot; -foregroundcolor  &quot;red&quot;
        return
    }

    if ($null -eq $recursive) {
        #&quot;SETTING RECURSIVE&quot;
        $recursive = $true
    } else {
        #&quot;recursive was not null it was $recursive&quot;
    }

    # $path = get-location
    $path = (get-location | ForEach-Object { $_.ProviderPath })

    $ErrorActionPreference = &quot;SilentlyContinue&quot;

    get-childitem -Path * -Include $fileTypes -Exclude .git,.hg,*jquery*,modernizr* -Recurse:$recursive |
        Where-Object { $_.DirectoryName -notmatch &quot;_book&quot; } |
        select-string -pattern $pattern |
        format-table -property @{Expression={$_.Path.SubString($path.Length+1)};Label=&quot;Location&quot;},
            @{Expression={$_.LineNumber};Label=&quot;Line&quot;},
            @{Expression={$_.Line.Replace(&quot;  &quot;,&quot; &quot;)};Label=&quot;Match&quot;} -auto

    return

    trap {
        write-host &quot;Not a valid regex, so falling back to a simple match&quot; -foregroundcolor  &quot;green&quot;

        get-childitem -Path * -Include $fileTypes -Exclude .git,.hg,*jquery*,modernizr* -Recurse:$recursive |
            Where-Object { $_.DirectoryName -notmatch &quot;_book&quot; } |
            select-string -pattern $pattern -SimpleMatch |
            Format-Table -property @{Expression={$_.Path.SubString($path.Length+1)};Label=&quot;Location&quot;},
                @{Expression={$_.LineNumber};Label=&quot;Line&quot;},
                @{Expression={$_.Line};Label=&quot;Match&quot;} -auto
    }
}

# same as findtext but does not use recursive
function findtext_norecurse($pattern)
{
    findtext $pattern $false
}

# Pattern is not treated as regular expression -- it's a &quot;simplematch&quot; instead
function findtext_raw($pattern, $recursive, $logging)
{
    if ($null -eq $pattern) {
        write-host &quot;Please provide a pattern you wish to find. (all text files will be searched)&quot; -foregroundcolor  &quot;red&quot;
        return
    }

    if ($null -eq $recursive) {
        #&quot;SETTING RECURSIVE&quot;
        $recursive = $true
    } else {
        #&quot;recursive was not null it was $recursive&quot;
    }


    $path = (get-location | ForEach-Object { $_.ProviderPath })

    get-childitem -Path * -Include $fileTypes -Exclude .git,.hg,*jquery*,modernizr* -Recurse:$recursive |
        Where-Object { $_.DirectoryName -notmatch &quot;_book&quot; } |
				% { 
						$_ | select-string -pattern $pattern -SimpleMatch |
						Format-Table -property @{Expression={$_.Path.SubString($path.Length+1)};Label=&quot;Location&quot;},
								@{Expression={$_.LineNumber};Label=&quot;Line&quot;},
								@{Expression={$_.Line};Label=&quot;Match&quot;} -auto;
					}
}

function findtext_raw_casesensitive($pattern, $recursive)
{
    if ($null -eq $pattern) {
        write-host &quot;Please provide a pattern you wish to find. (all text files will be searched)&quot; -foregroundcolor  &quot;red&quot;
        return
    }

    if ($null -eq $recursive) {
        #&quot;SETTING RECURSIVE&quot;
        $recursive = $true
    } else {
        #&quot;recursive was not null it was $recursive&quot;
    }

    $path = (get-location | ForEach-Object { $_.ProviderPath })

    get-childitem -Path * -Include $fileTypes -Exclude .git,.hg,*jquery*,modernizr* -Recurse:$recursive |
        Where-Object { $_.DirectoryName -notmatch &quot;_book&quot; } |
        select-string -pattern $pattern -SimpleMatch -CaseSensitive |
        Format-Table -property @{Expression={$_.Path.SubString($path.Length+1)};Label=&quot;Location&quot;},
            @{Expression={$_.LineNumber};Label=&quot;Line&quot;},
            @{Expression={$_.Line};Label=&quot;Match&quot;} -auto
}


function findtext_raw_type($types, $pattern, $recursive){
	$originalTypes = $fileTypes;
	$fileTypes = $types;
	$logging = $true;
	findtext_raw $pattern $recursive $logging;
	$fileTypes = $originalTypes;
}


function findtext_type($types, $pattern, $recursive){

	$originalTypes = $fileTypes;
	$fileTypes = $types;
	findtext $pattern $recursive;
	$fileTypes = $originalTypes;
}

function findtext_help () {
 

}

set-alias fi FindText # can't use &quot;ft&quot;, it's &quot;format-table&quot; already
set-alias f findtext
set-alias f.raw findtext_raw
set-alias f.type findtext_type
set-alias f.type-raw findtext_raw_type
set-alias f.raw-type findtext_raw_type
set-alias f.raw-ci findtext_raw_casesensitive
set-alias f.no-rec findtext_norecurse
set-alias ftx findtext_norecurse
</code></pre>

</article>
<footer><hr /><small><a href='http://secretgeek.net'>secretgeek.net</a> | <a href='https://nimbletext.com'>nimbletext</a> | <a href='http://timesnapper.com'>TimeSnapper</a></small><br /><br /></footer>
</body>
</html>