<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8' name='viewport' content='width=device-width, initial-scale=1.0'>
<title>{{title}}</title>
</head>
<body>
<style>
body {
  max-width:70ch;
  padding:2ch;
  margin:auto;
  color:#333;
  font-size:1.2em;
}
</style>
<h1 id="find-all-the-todos-in-a-file-or-folder">Find all the TODO's in a file or folder</h1>
<pre><code>function todo()
{
	# recursively search for TODO followed by colon, or [ ] with an underscore in between.
	findtext (&quot;TODO&quot; + &quot;:|\[_\]&quot;)
}
</code></pre>
<p>...which relies on my ever-evoling sense of 'findtext'</p>
<p>Currently something like....</p>
<pre><code>function findtext($pattern)
{
    if ($pattern -eq $null) {
        write-host &quot;Please provide a pattern you wish to find. (all text files will be searched)&quot; -foregroundcolor  &quot;red&quot;
        return
    }
    #TODO: ability to override included file types, override recurse

    [string[]] $fileTypes = &quot;*.md&quot;,&quot;*.fmw&quot;,&quot;*.txt&quot;,&quot;*.cs&quot;,&quot;*.cshtml&quot;,&quot;*.css&quot;,&quot;*.ps1&quot;,&quot;*.js&quot;,&quot;*.bat&quot;,&quot;*.vbs&quot;,&quot;*.xml&quot;,&quot;*.config&quot;,&quot;*.htm&quot;,&quot;*.html&quot;,&quot;*.pre&quot;,&quot;*.ini&quot;,&quot;*.sql&quot;,&quot;*.linq&quot;,&quot;*.json&quot;,&quot;*.spark&quot;,&quot;*.ts&quot;,&quot;*.psm1&quot;,&quot;*.psd1&quot;,&quot;*.aspx&quot;,&quot;*.ascx&quot;,&quot;*.asp&quot;,&quot;*.asmx&quot;,&quot;*.pubxml&quot;,&quot;*.dgml&quot;,&quot;*.sln&quot;,&quot;*.*proj&quot;,&quot;*.spark&quot;

    #Consider: asa asax ascx ashx asmx asp aspq aspx cfg cfm class config cs cshtm cshtml css csv dbml htaccess htm html ini inc install js log master module mxml php phps pl py readme restext resx script settings sitemap skin sql svc text txt vb vbhtm vbhtml vbs xaml xml xoml xsd xsl xslt
    
    $path = get-location

    $ErrorActionPreference = &quot;SilentlyContinue&quot;
    #TODO: improve the way the error handling is performed, so we ONLY jump to the trap if the regex was invalid
    get-childitem -Path * -Include $fileTypes -Exclude .hg,*jquery*,modernizr* -Recurse | 
        ? { $_.DirectoryName -notmatch &quot;_book&quot; } |
        select-string -pattern $pattern |
        format-table -property @{Expression={$_.Path.SubString($path.Path.Length+1)};Label=&quot;Location&quot;}, 
            @{Expression={$_.LineNumber};Label=&quot;Line&quot;},
            @{Expression={$_.Line};Label=&quot;Match&quot;} -auto

    return

    trap {
        write-host &quot;Not a valid regex, so falling back to a simple match&quot; -foregroundcolor  &quot;green&quot;

        get-childitem -Path * -Include $fileTypes -Exclude .hg,*jquery*,modernizr* -Recurse | 
            ? { $_.DirectoryName -notmatch &quot;_book&quot; } |
            select-string -pattern $pattern -SimpleMatch |
            ft -property @{Expression={$_.Path.SubString($path.Path.Length+1)};Label=&quot;Location&quot;}, 
                @{Expression={$_.LineNumber};Label=&quot;Line&quot;},
                @{Expression={$_.Line};Label=&quot;Match&quot;} -auto
    }
}

#set-alias ft FindText -- can't use this: it's format-table already
</code></pre>

</body>
<script>
</script>
</html>